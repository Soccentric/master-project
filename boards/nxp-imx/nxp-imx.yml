# ==============================================================================
# NXP i.MX Family Configuration
# This file serves as the master template for all NXP i.MX boards
# Machine and target are substituted from command line arguments
# ==============================================================================

header:
  version: 11
  includes:
    - boards/common.yml

defaults:
  repos:
    branch: soc-rel-v2025.4

machine: __MACHINE__
distro: fslc-wayland
target: __TARGET__
build_system: oe

repos:
  openembedded-core:
    url: https://github.com/soc-imx-oss/openembedded-core
    path: sources/nxp-imx/openembedded-core
    layers:
      meta: null

  bitbake:
    url: https://github.com/soc-imx-oss/bitbake
    path: sources/nxp-imx/bitbake
    layers:
      bitbake: excluded

  meta-openembedded:
    url: https://github.com/soc-imx-oss/meta-openembedded

    path: sources/nxp-imx/meta-openembedded
    layers:
      meta-oe: null
      meta-filesystems: null
      meta-gnome: null
      meta-xfce: null
      meta-initramfs: null
      meta-networking: null
      meta-multimedia: null
      meta-python: null

  meta-yocto:
    url: https://github.com/soc-imx-oss/meta-yocto
    path: sources/nxp-imx/meta-yocto
    layers:
      meta-poky: null

  meta-freescale:
    url: https://github.com/soc-imx-oss/meta-freescale
    path: sources/nxp-imx/meta-freescale

  meta-freescale-3rdparty:
    url: https://github.com/soc-imx-oss/meta-freescale-3rdparty
    path: sources/nxp-imx/meta-freescale-3rdparty

  meta-freescale-distro:
    url: https://github.com/soc-imx-oss/meta-freescale-distro
    path: sources/nxp-imx/meta-freescale-distro

  meta-soc-imx:
    url: https://github.com/soccentric/meta-soc-imx
    path: sources/nxp-imx/meta-soc-imx

  meta-nxp-demo-experience:
    url: https://github.com/soc-imx-oss/meta-nxp-demo-experience
    path: sources/nxp-imx/meta-nxp-demo-experience
  meta-imx-frdm:
    url: https://github.com/soc-imx-oss/meta-imx-frdm
    path: sources/nxp-imx/meta-imx-frdm
    layers:
      meta-imx-bsp: 
      meta-imx-sdk:
      meta-nxp-connectivity:
      meta-nxp-demo-experience:

  meta-nxp-security-reference-design:
    url: https://github.com/soc-imx-oss/meta-nxp-security-reference-design
    path: sources/nxp-imx/meta-nxp-security-reference-design
    layers:
      meta-secure-boot: null
  meta-nxp-easyevse-mpu:
    url: https://github.com/soc-imx-oss/meta-nxp-easyevse-mpu
    path: sources/nxp-imx/meta-nxp-easyevse-mpu
  meta-smart-appliance:
    url: https://github.com/soc-imx-oss/meta-smart-appliance
    path: sources/nxp-imx/meta-smart-appliance
  meta-imx8mp-isp-ar0144:
    url: https://github.com/soc-imx-oss/meta-imx8mp-isp-ar0144
    path: sources/nxp-imx/meta-imx8mp-isp-ar0144
  meta-imx8mp-isp-imx219:
    url: https://github.com/soc-imx-oss/meta-imx8mp-isp-imx219
    path: sources/nxp-imx/meta-imx8mp-isp-imx219
  meta-swupdate-imx:
    url: https://github.com/soc-imx-oss/meta-swupdate-imx
    path: sources/nxp-imx/meta-swupdate-imx
  meta-imx8mp-isp-ov5647:
    url: https://github.com/soc-imx-oss/meta-imx8mp-isp-ov5647
    path: sources/nxp-imx/meta-imx8mp-isp-ov5647
  meta-eiq-heterogenous:
    url: https://github.com/soc-imx-oss/meta-eiq-heterogenous
    path: sources/nxp-imx/meta-eiq-heterogenous

local_conf_header:
  custom-local-conf: |
    ACCEPT_FSL_EULA = "1"
  mask-problematic-recipes: |
    # Mask recipes that cause GITPKGV expansion errors
    # These recipes inherit gitpkgv.bbclass which has compatibility issues
    BBMASK += "meta-openembedded/meta-multimedia/recipes-dvb/tvheadend/"
    BBMASK += "meta-openembedded/meta-oe/recipes-connectivity/usbmuxd/"
    BBMASK += "meta-openembedded/meta-oe/recipes-extended/libimobiledevice/libusbmuxd"
    BBMASK += "meta-openembedded/meta-oe/recipes-support/freerdp/"
    BBMASK += "meta-openembedded/meta-oe/recipes-support/inih/libinih_git.bb"
    # Mask firmware-nxp-wifi due to missing firmware files
    BBMASK += "meta-freescale/recipes-bsp/firmware-imx/firmware-nxp-wifi*"
    # Mask se05x due to missing zip file
    BBMASK += "meta-nxp-easyevse-mpu/recipes-security/se05x/se05x*"
    # Mask recipes requiring qt6 classes
    BBMASK += "meta-nxp-demo-experience/recipes-examples/imx-video-to-texture/imx-video-to-texture*"
    BBMASK += "meta-nxp-demo-experience/recipes-gopoint/imx-gopoint/nxp-demo-experience*"
    BBMASK += "meta-nxp-demo-experience/recipes-examples/imx-voice-player/imx-voice-player*"
    # Mask python-pillow due to missing distutils-tools class
    BBMASK += "meta-eiq-heterogenous/recipes-devtools/python/python-pillow*"
    # Mask secure boot image due to missing qt6 layer
    BBMASK += "meta-nxp-security-reference-design/meta-secure-boot/recipes-secure-boot/images/imx-image-full-secure-boot*"
    BBMASK += "meta-nxp-security-reference-design/meta-secure-boot/recipes-secure-boot/images/imx-image-core-secure-boot*"
    # Mask imx-ebike due to indentation error in autogenerated script
    BBMASK += "meta-nxp-demo-experience/recipes-examples/imx-ebike/imx-ebike*"
    # Mask easyevse-ros-demo due to missing ros_distro_humble class
    BBMASK += "meta-nxp-easyevse-mpu/recipes-nxp-easyevse/easyevse-ros-demo/easyevse-ros-demo*"
    # Mask secure boot multimedia image due to missing include file
    BBMASK += "meta-nxp-security-reference-design/meta-secure-boot/recipes-secure-boot/images/imx-image-multimedia-secure-boot*"
    # Mask eiq-hetero due to AUTOREV error
    BBMASK += "meta-eiq-heterogenous/recipes-eiq-hetero/eiq-hetero/eiq-hetero*"
    # Mask imx-image-easyevse due to missing qt6 layer include
    BBMASK += "meta-nxp-easyevse-mpu/recipes-core/images/imx-image-easyevse*"
  suppress-warnings: |
    # Suppress all QA warnings
    WARN_QA = ""
  add_user: |
    EXTRA_USERS_PARAMS = "useradd -m -p '' imx; usermod -a -G sudo imx;"
  layer-compat: |
    LAYERSERIES_COMPAT_imx-frdm-release = "scarthgap"
